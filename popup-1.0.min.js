(function(){var a=[];var b="popup-drag-handle";var c="popup-title";var d=1e3;var e=0;var f=window.PopupPosition={BELOW_LEFT_ALIGN:0,BELOW_RIGHT_ALIGN:1,TOP_LEFT_ALIGN:2,TOP_RIGHT_ALIGN:3,LEFT_BOTTOM_ALIGN:4,LEFT_TOP_ALIGN:5,RIGHT_BOTTOM_ALIGN:6,RIGHT_TOP_ALIGN:7,CENTER_SCREEN:8,CENTER_TOP:9,CENTER_BOTTOM:10,CENTER_LEFT:11,CENTER_RIGHT:12,TOP_LEFT:13,TOP_RIGHT:14,BOTTOM_LEFT:15,BOTTOM_RIGHT:16};var g=window.Popup={_convertObject:function(a){var b=null;if(typeof a==="object"){b=$(a)}else{var b=$(""+a)}return b},_topBorder:function(a){return parseInt(a.css("border-top-width"))},_bottomBorder:function(a){return parseInt(a.css("border-bottom-width"))},_leftBorder:function(a){return parseInt(a.css("border-left-width"))},_rightBorder:function(a){return parseInt(a.css("border-right-width"))},_topPadding:function(a){return parseInt(a.css("padding-top"))},_bottomPadding:function(a){return parseInt(a.css("padding-bottom"))},_leftPadding:function(a){return parseInt(a.css("padding-left"))},_rightPadding:function(a){return parseInt(a.css("padding-right"))},_realWidth:function(a){return a.width()+g._leftBorder(a)+g._rightBorder(a)+g._leftPadding(a)+g._rightPadding(a)},_realHeight:function(a){return a.height()+g._topBorder(a)+g._bottomBorder(a)+g._topPadding(a)+g._bottomPadding(a)},manage:function(b,c){var d=g._convertObject(b);if(d){if(d.data("popupId")===undefined){d.data("popupId",e++);a[d.data("popupId")]=d}d.data("popup-options",c)}else{throw""+b+" could not be found!"}},show:function(a,c){var e=g._convertObject(a);if(!e){throw""+a+" could not be found!"}if(!c){c=e.data("popup-options")}else{g.manage(a,c)}if(!c){c={nPosition:f.CENTER_SCREEN};g.manage(a,c)}var h=g._convertObject(c.oElAxis);if(h.length<=0&&c.nPosition<f.CENTER_SCREEN){throw"Cannot position relative to null element"}e.css("position","absolute").css("z-index",d).css("width",e.width());var i=null;var j=null;switch(c.nPosition){case f.BELOW_LEFT_ALIGN:i=h.offset().left;j=h.offset().top+g._realHeight(h);break;case f.BELOW_RIGHT_ALIGN:i=h.offset().left-g._realWidth(e)+g._realWidth(h);j=h.offset().top+g._realHeight(h);break;case f.TOP_LEFT_ALIGN:i=h.offset().left;j=h.offset().top-g._realHeight(e);break;case f.TOP_RIGHT_ALIGN:i=h.offset().left-g._realWidth(e)+g._realWidth(h);j=h.offset().top-g._realHeight(e);break;case f.LEFT_BOTTOM_ALIGN:i=h.offset().left-g._realWidth(e);j=h.offset().top-g._realHeight(e)+g._realHeight(h);break;case f.LEFT_TOP_ALIGN:i=h.offset().left-g._realWidth(e);j=h.offset().top;break;case f.RIGHT_BOTTOM_ALIGN:i=h.offset().left+g._realWidth(h);j=h.offset().top-g._realHeight(e)+g._realHeight(h);break;case f.RIGHT_TOP_ALIGN:i=h.offset().left+g._realWidth(h);j=h.offset().top;break;case f.CENTER_SCREEN:i=($(window).width()-g._realWidth(e))/2;j=($(window).height()-g._realHeight(e))/2;break;case f.CENTER_TOP:i=($(window).width()-g._realWidth(e))/2;j=0;break;case f.CENTER_BOTTOM:i=($(window).width()-g._realWidth(e))/2;j=$(window).height()-g._realHeight(e);break;case f.CENTER_LEFT:i=0;j=($(window).height()-g._realHeight(e))/2;break;case f.CENTER_RIGHT:i=$(window).width()-g._realWidth(e);j=($(window).height()-g._realHeight(e))/2;break;case f.TOP_LEFT:i=0;j=0;break;case f.TOP_RIGHT:i=$(window).width()-g._realWidth(e);j=0;break;case f.BOTTOM_LEFT:i=0;j=$(window).height()-g._realHeight(e);break;case f.BOTTOM_RIGHT:i=$(window).width()-g._realWidth(e);j=$(window).height()-g._realHeight(e);break}if(c.xOffset){i+=c.xOffset}if(c.yOffset){j+=c.yOffset}if(c.oElParent){var k=g._convertObject(c.oElParent);if(k.length){i-=k.offset().left;j-=k.offset().top}else{throw"Parent specified but not found"}}else if(c.findParent){var l=$("html")[0];var k=e;do{k=k.parent();if(k.css("position")!=="static"){i-=k.offset().left;j-=k.offset().top;break}}while(k[0]!==l)}i=Math.max(i,0);i=Math.min(i,$(window).width()-g._realWidth(e));j=Math.max(j,0);j=Math.min(j,$(window).height()-e.height());e.css("left",i).css("top",j).show().data("justShown",true);if(c.allowDrag){if(c.draghandle){e.draggable({handle:c.draghandle})}else{e.draggable({handle:"."+b})}}},hide:function(a){var b=g._convertObject(a);if(b){b.hide()}else{throw"Cannot hide null popup"}},_reshowAll:function(){for(var b=0;b<a.length;b++){g.show(a[b])}},_containedWithin:function(a,b){if(a.data("justShown")){a.data("justShown",false);return false}return $(b.target).parents().index(a)==-1}};var h;$(window).resize(function(){if(h){clearTimeout(h)}h=setTimeout(g._reshowAll,100)});$(document).click(function(b){for(var c=0;c<a.length;c++){if(g._containedWithin(a[c],b)){g.hide(a[c])}}})})()